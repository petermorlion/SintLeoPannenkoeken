@page "/beheer/gebruikers"
@using SintLeoPannenkoeken.Blazor.Client.Auth
@using SintLeoPannenkoeken.Blazor.Client.Server
@using SintLeoPannenkoeken.Blazor.Client.Server.Contracts

<MasterDetailPage TDto="GebruikerDto"
                  AuthorizedRoles="@($"{Roles.RolesForGebruikers}")"
                  Title="Gebruikers"
                  DataProvider="@_dataProvider">
    <Columns>
        <PropertyColumn T="GebruikerDto" TProperty="string" Property="x => x.Email" Title="Email" InitialDirection="SortDirection.Ascending" />
        <PropertyColumn T="GebruikerDto" TProperty="string" Property="x => FormatRoles(x.Rollen)" Title="Rollen" />
    </Columns>
</MasterDetailPage>

@code {
    private Func<IServerData, Task<IEnumerable<GebruikerDto>>> _dataProvider => async (serverData) => await serverData.GetGebruikers();

    private string FormatRoles(IEnumerable<string> roles)
    {
        return string.Join(", ", roles);
    }
}
